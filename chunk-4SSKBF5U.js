import{a as $,b as J,c as X,d as Z,e as ee,f as te,h as j,i as ie}from"./chunk-W3Z4CWB7.js";import{$ as h,A as b,B as M,Ba as u,C as R,Ca as G,Da as m,Ga as W,I as E,J as F,Ja as w,P as a,Ra as K,S as x,Va as ne,Wa as I,aa as C,ea as p,fa as o,ga as l,ha as D,ia as f,ja as y,ka as Q,la as k,na as c,oa as H,pa as d,qa as N,ra as A,sa as P,ta as Y,ua as U,va as S,wa as s,x as v,xa as V,ya as T,z as g}from"./chunk-M2XC7DS3.js";var B=class r{store=v(I);languageService=v(ne);isFlipped=E(!1,{});frontText=m(void 0,{});backText=m(void 0,{});frontLabel=m(void 0,{});backLabel=m(void 0,{});displayFrontLabel=u(()=>{if(this.frontLabel())return this.frontLabel();let t=this.store.currentRoundConfig();if(!t)return"Front";let e=t.layout.dataMap.primary;return e==="english"?"English":e!=="contextSentence"&&e!=="translation"?this.languageService.getLanguageDisplayName(e):e},{});displayFrontText=u(()=>{if(this.frontText())return this.frontText();let t=this.store.currentCard(),e=this.store.currentRoundConfig();if(!t||!e)return"";let n=e.layout.dataMap.primary;return n==="english"?t.english:n!=="contextSentence"&&n!=="translation"&&t.translations[n]||""},{});displayBackLabel=u(()=>{if(this.backLabel())return this.backLabel();let t=this.store.currentRoundConfig();if(!t)return"Back";let e=t.layout.dataMap.secondary;return e==="english"?"English":e!=="contextSentence"&&e!=="translation"?this.languageService.getLanguageDisplayName(e):e},{});displayBackText=u(()=>{if(this.backText())return this.backText();let t=this.store.currentCard(),e=this.store.currentRoundConfig();if(!t||!e)return"";let n=e.layout.dataMap.secondary;return n==="english"?t.english:n!=="contextSentence"&&n!=="translation"&&t.translations[n]||""},{});textSizeClass=u(()=>{let e=(this.isFlipped()?this.displayBackText():this.displayFrontText()).length;return e>60?"text-lg sm:text-xl md:text-2xl":e>40?"text-xl sm:text-2xl md:text-3xl":"text-2xl sm:text-3xl md:text-4xl"},{});flip(){this.isFlipped.update(t=>!t)}resetFlip(){this.isFlipped.set(!1)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=x({type:r,selectors:[["app-flashcard"]],inputs:{frontText:[1,"frontText"],backText:[1,"backText"],frontLabel:[1,"frontLabel"],backLabel:[1,"backLabel"]},decls:23,vars:10,consts:[[1,"perspective-1000","w-full","max-w-lg","h-96","sm:h-[28rem]","cursor-pointer","group","mx-auto","select-none",3,"click"],[1,"relative","w-full","h-full","transition-all","duration-500","transform","preserve-3d"],[1,"absolute","w-full","h-full","backface-hidden","bg-white","dark:bg-slate-800","rounded-3xl","shadow-[0_20px_50px_-12px_rgba(0,0,0,0.1)]","dark:shadow-[0_20px_50px_-12px_rgba(0,0,0,0.3)]","ring-1","ring-slate-900/5","dark:ring-white/5","border-b-8","border-slate-100","dark:border-slate-700","flex","flex-col","items-center","justify-center","p-8","text-center","transition-transform","hover:-translate-y-1"],[1,"absolute","top-8","left-0","w-full","flex","justify-center"],[1,"px-3","py-1","rounded-full","bg-slate-100","dark:bg-slate-700","text-slate-500","dark:text-slate-300","text-xs","font-bold","uppercase","tracking-wider"],[1,"font-black","text-slate-800","dark:text-white","break-words","leading-tight","tracking-tight"],[1,"absolute","bottom-8","text-slate-300","dark:text-slate-600","text-sm","font-medium","flex","items-center","gap-2","animate-pulse"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M21 12H3"],["d","m15 6 6 6-6 6"],[1,"absolute","w-full","h-full","backface-hidden","bg-gradient-to-br","from-blue-50","to-indigo-50","dark:from-slate-800","dark:to-slate-800","rounded-3xl","shadow-[0_20px_50px_-12px_rgba(59,130,246,0.15)]","dark:shadow-[0_20px_50px_-12px_rgba(0,0,0,0.3)]","ring-1","ring-blue-900/5","dark:ring-white/5","border-b-8","border-blue-200","dark:border-slate-600","flex","flex-col","items-center","justify-center","p-8","text-center","rotate-y-180"],[1,"px-3","py-1","rounded-full","bg-blue-100","dark:bg-blue-900/30","text-blue-600","dark:text-blue-300","text-xs","font-bold","uppercase","tracking-wider"],[1,"font-black","text-blue-900","dark:text-blue-100","break-words","leading-tight","tracking-tight"],[1,"absolute","bottom-8","text-blue-300/60","dark:text-slate-600"],["xmlns","http://www.w3.org/2000/svg","width","32","height","32","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M20 6 9 17l-5-5"]],template:function(e,n){e&1&&(f(0,"div",0),H("click",function(){return n.flip()}),f(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),s(5),y()(),f(6,"h2",5),s(7),y(),f(8,"div",6)(9,"span"),s(10,"Tap to flip"),y(),M(),f(11,"svg",7),Q(12,"path",8)(13,"path",9),y()()(),R(),f(14,"div",10)(15,"div",3)(16,"span",11),s(17),y()(),f(18,"h2",12),s(19),y(),f(20,"div",13),M(),f(21,"svg",14),Q(22,"path",15),y()()()()()),e&2&&(a(),U("rotate-y-180",n.isFlipped()),a(4),T(" ",n.frontLabel()," "),a(),S(n.textSizeClass()),a(),T(" ",n.frontText()," "),a(10),T(" ",n.backLabel()," "),a(),S(n.textSizeClass()),a(),T(" ",n.backText()," "))},dependencies:[w,ee],styles:[".perspective-1000[_ngcontent-%COMP%]{perspective:1000px}.preserve-3d[_ngcontent-%COMP%]{transform-style:preserve-3d}.backface-hidden[_ngcontent-%COMP%]{backface-visibility:hidden}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}[_nghost-%COMP%]{display:block;width:100%}"]})};function ae(r,t){if(r&1){let e=k();o(0,"button",7),c("click",function(){g(e);let i=d(2);return b(i.continueAfterWrongAnswer())}),s(1," Continue "),l()}}function oe(r,t){if(r&1&&(o(0,"div",5),s(1),l(),h(2,ae,2,0,"button",6)),r&2){let e=d();p("ngClass",e.typingFeedback().correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),a(),T(" ",e.typingFeedback().msg," "),a(),C(e.isPaused()?2:-1)}}var O=class r{promptText=m.required({});expectedAnswer=m.required({});answerSubmitted=G();inputControl=new X("");typingFeedback=E(null,{});isPaused=E(!1,{});constructor(){F(()=>{this.isPaused()?this.inputControl.disable():this.inputControl.enable()})}checkTyping(){if(!this.inputControl.value)return;let t=this.inputControl.value.trim().toLowerCase(),e=this.expectedAnswer().toLowerCase();t===e?(this.typingFeedback.set({correct:!0,msg:"Correct!"}),setTimeout(()=>{this.answerSubmitted.emit({success:!0}),this.inputControl.setValue(""),this.typingFeedback.set(null)},j.FEEDBACK_DELAY)):(this.typingFeedback.set({correct:!1,msg:`Incorrect. It was: ${e}`}),this.isPaused.set(!0))}continueAfterWrongAnswer(){this.isPaused.set(!1),this.typingFeedback.set(null),this.inputControl.setValue(""),this.answerSubmitted.emit({success:!1})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=x({type:r,selectors:[["app-typing-card"]],inputs:{promptText:[1,"promptText"],expectedAnswer:[1,"expectedAnswer"]},outputs:{answerSubmitted:"answerSubmitted"},decls:9,vars:4,consts:[[1,"w-full","max-w-sm","bg-white","rounded-2xl","shadow-lg","border-b-4","border-indigo-200","p-6","flex","flex-col","items-center","text-center"],[1,"text-indigo-400","text-sm","font-semibold","tracking-wider","uppercase","mb-2"],[1,"text-3xl","font-bold","text-slate-800","mb-8"],["type","text","placeholder","Type English word...",1,"w-full","p-4","rounded-xl","bg-slate-50","border-2","border-slate-200","focus:border-indigo-500","focus:bg-white","outline-none","text-lg","text-center","font-semibold","text-slate-700","transition-all","mb-4","disabled:opacity-50","disabled:cursor-not-allowed",3,"keyup.enter","formControl"],[1,"w-full","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","font-bold","rounded-xl","shadow-md","active:translate-y-0.5","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"mt-4","p-3","rounded-lg","w-full","font-medium",3,"ngClass"],[1,"w-full","py-3","mt-4","bg-red-600","hover:bg-red-700","text-white","font-bold","rounded-xl","shadow-md","active:translate-y-0.5","transition-all"],[1,"w-full","py-3","mt-4","bg-red-600","hover:bg-red-700","text-white","font-bold","rounded-xl","shadow-md","active:translate-y-0.5","transition-all",3,"click"]],template:function(e,n){e&1&&(o(0,"div",0)(1,"div",1),s(2,"Translate to English"),l(),o(3,"h2",2),s(4),l(),o(5,"input",3),c("keyup.enter",function(){return n.checkTyping()}),l(),o(6,"button",4),c("click",function(){return n.checkTyping()}),s(7," Check Answer "),l(),h(8,oe,3,3),l()),e&2&&(a(4),V(n.promptText()),a(),p("formControl",n.inputControl),a(),p("disabled",n.isPaused()),a(2),C(n.typingFeedback()?8:-1))},dependencies:[w,W,te,$,J,Z],encapsulation:2})};var le=["flashcardRef"];function se(r,t){if(r&1&&D(0,"app-flashcard",2,0),r&2){let e=d();p("frontText",e.frontText())("backText",e.backText())("frontLabel",e.frontLabel())("backLabel",e.backLabel())}}function de(r,t){if(r&1){let e=k();o(0,"app-typing-card",4),c("answerSubmitted",function(i){g(e);let _=d();return b(_.onAnswerSubmitted(i))}),l()}if(r&2){let e=d();p("promptText",e.frontText())("expectedAnswer",e.backText())}}var L=class r{card=m.required({});layoutConfig=m.required({});answerSubmitted=G();flashcard;frontText=u(()=>{let t=this.layoutConfig();if(!t)return"";let e=this.card(),i=t.dataMap.primary;return i==="english"?e.english:e.translations&&i in e.translations&&e.translations[i]||""},{});backText=u(()=>{let t=this.layoutConfig();if(!t)return"";let e=this.card(),i=t.dataMap.secondary;return i==="english"?e.english:e.translations&&i in e.translations&&e.translations[i]||""},{});frontLabel=u(()=>{let t=this.layoutConfig();return t?t.dataMap.primary==="english"?"English":"Polish":"Front"},{});backLabel=u(()=>{let t=this.layoutConfig();return t?t.dataMap.secondary==="english"?"English":"Polish":"Back"},{});onAnswerSubmitted(t){this.answerSubmitted.emit(t)}resetFlip(){this.flashcard?.resetFlip()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=x({type:r,selectors:[["app-card-renderer"]],viewQuery:function(e,n){if(e&1&&N(le,5),e&2){let i;A(i=P())&&(n.flashcard=i.first)}},inputs:{card:[1,"card"],layoutConfig:[1,"layoutConfig"]},outputs:{answerSubmitted:"answerSubmitted"},decls:3,vars:1,consts:[["flashcardRef",""],[1,"w-full","h-full","flex","justify-center"],[1,"w-full",3,"frontText","backText","frontLabel","backLabel"],[1,"w-full",3,"promptText","expectedAnswer"],[1,"w-full",3,"answerSubmitted","promptText","expectedAnswer"]],template:function(e,n){e&1&&(o(0,"div",1),h(1,se,2,4,"app-flashcard",2)(2,de,1,2,"app-typing-card",3),l()),e&2&&(a(),C((n.layoutConfig().templateId||"flashcard_standard")==="flashcard_standard"?1:n.layoutConfig().templateId==="typing_challenge"?2:-1))},dependencies:[w,B,O],styles:["[_nghost-%COMP%]{display:block;width:100%}"]})};function ce(r,t){if(r&1){let e=k();o(0,"div",11)(1,"app-card-renderer",13),c("answerSubmitted",function(i){g(e);let _=d();return b(_.onTypingAnswer(i))}),l()()}if(r&2){let e,n=d();a(),p("card",n.store.currentCard())("layoutConfig",(e=n.store.currentRoundConfig())==null?null:e.layout)}}function pe(r,t){if(r&1){let e=k();o(0,"div",12)(1,"div",14)(2,"button",15),c("click",function(){g(e);let i=d();return b(i.handleAnswer(!1))}),o(3,"span",16),s(4,"\u274C"),l(),o(5,"span"),s(6,"Diffcult"),l()(),o(7,"button",17),c("click",function(){g(e);let i=d();return b(i.handleAnswer(!0))}),o(8,"span",18),s(9,"\u2705"),l(),o(10,"span"),s(11,"Got It"),l()()(),o(12,"button",19),c("click",function(){g(e);let i=d();return b(i.skipCard())}),s(13," Skip Card "),l()()}if(r&2){let e=d();a(2),S(!(e.cardRef==null||e.cardRef.flashcard==null)&&e.cardRef.flashcard.isFlipped()?"bg-white text-red-500 border-slate-200 hover:border-red-200 hover:bg-red-50":"bg-slate-100 text-slate-400 border-slate-200"),p("disabled",!(!(e.cardRef==null||e.cardRef.flashcard==null)&&e.cardRef.flashcard.isFlipped())),a(5),S(!(e.cardRef==null||e.cardRef.flashcard==null)&&e.cardRef.flashcard.isFlipped()?"bg-gradient-to-b from-green-500 to-green-600 border-green-700 text-white":"bg-slate-100 text-slate-400 border-slate-200"),p("disabled",!(!(e.cardRef==null||e.cardRef.flashcard==null)&&e.cardRef.flashcard.isFlipped()))}}var re=class r{store=v(I);gameService=v(ie);router=v(K);cardRef;constructor(){F(()=>{this.store.phase()==="MENU"&&this.store.activeDeck().length===0&&this.router.navigate(["/"])}),F(()=>{this.store.phase()==="SUMMARY"&&this.router.navigate(["/summary"])})}handleAnswer(t){this.cardRef?.resetFlip(),setTimeout(()=>{this.gameService.handleAnswer(t)},j.FLIP_DELAY)}skipCard(){this.cardRef?.resetFlip(),this.gameService.skipCard()}onTypingAnswer(t){this.gameService.handleAnswer(t.success)}backToMenu(){this.store.reset(),this.router.navigate(["/"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=x({type:r,selectors:[["app-game"]],viewQuery:function(e,n){if(e&1&&N(L,5),e&2){let i;A(i=P())&&(n.cardRef=i.first)}},decls:17,vars:5,consts:[[1,"flex-grow","flex","flex-col","items-center","justify-center","w-full","gap-6","animate-fade-in","relative"],[1,"w-full","flex","justify-between","items-center","z-10"],[1,"flex","items-center","gap-2","px-3","py-2","rounded-lg","text-slate-400","hover:text-slate-700","hover:bg-slate-100","transition-all","text-sm","font-semibold",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M19 12H5"],["d","M12 19l-7-7 7-7"],[1,"flex","flex-col","items-end"],[1,"text-[10px]","uppercase","font-bold","text-slate-400","tracking-wider"],[1,"text-sm","font-bold","text-indigo-600"],[1,"w-full","max-w-md","h-2","bg-slate-100","rounded-full","overflow-hidden","shadow-inner"],[1,"h-full","bg-gradient-to-r","from-blue-500","to-indigo-500","transition-all","duration-500","ease-out"],[1,"w-full","flex","justify-center","py-4"],[1,"w-full","max-w-lg","flex","flex-col","gap-3","z-10"],[1,"w-full","max-w-lg",3,"answerSubmitted","card","layoutConfig"],[1,"grid","grid-cols-2","gap-4"],[1,"group","relative","overflow-hidden","py-4","rounded-2xl","font-bold","transition-all","flex","items-center","justify-center","gap-2","shadow-sm","border-b-4","active:border-b-0","active:translate-y-1","disabled:opacity-50","disabled:cursor-not-allowed","disabled:active:border-b-4","disabled:active:translate-y-0",3,"click","disabled"],[1,"text-xl","group-hover:-rotate-12","transition-transform"],[1,"group","relative","overflow-hidden","py-4","rounded-2xl","font-bold","transition-all","flex","items-center","justify-center","gap-2","shadow-md","border-b-4","active:border-b-0","active:translate-y-1","disabled:opacity-50","disabled:cursor-not-allowed","disabled:active:border-b-4","disabled:active:translate-y-0",3,"click","disabled"],[1,"text-xl","group-hover:rotate-12","transition-transform"],[1,"text-xs","font-semibold","text-slate-400","hover:text-slate-600","uppercase","tracking-wider","py-2","transition-colors",3,"click"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),c("click",function(){return n.backToMenu()}),M(),o(3,"svg",3),D(4,"path",4)(5,"path",5),l(),R(),o(6,"span"),s(7,"Quit"),l()(),o(8,"div",6)(9,"span",7),s(10,"Current Round"),l(),o(11,"span",8),s(12),l()()(),o(13,"div",9),D(14,"div",10),l(),h(15,ce,2,2,"div",11),h(16,pe,14,6,"div",12),l()),e&2){let i,_;a(12),V((i=n.store.currentRoundConfig())==null?null:i.name),a(2),Y("width",n.store.progress(),"%"),a(),C(n.store.currentCard()?15:-1),a(),C(((_=n.store.currentRoundConfig())==null||_.layout==null?null:_.layout.templateId)==="flashcard_standard"?16:-1)}},dependencies:[w,L],styles:["[_nghost-%COMP%]{display:block}"]})};export{re as GameComponent};
