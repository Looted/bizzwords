import{a as Z,b as B,c as H,d as W,e as Y,f as U,h as V,i as K}from"./chunk-G2ZFNDAC.js";import{$ as f,Ba as j,D as y,E,Ea as G,K as a,N as S,V as C,W as w,X as b,Y as o,Z as r,_ as u,aa as h,ba as T,ca as c,da as I,ea as d,fa as M,ga as D,ha as A,ia as P,ja as l,ka as L,la as g,oa as v,ra as O,t as x,ta as F,v as m,w as p,x as _,y as k}from"./chunk-4WL5KJUM.js";var N=class n{store=x(G);isFlipped=y(!1,{});frontLabel=v(()=>this.store.currentRound()==="RECOGNIZE_EN"?"English":"Polish",{});frontText=v(()=>{let t=this.store.currentCard(),e=this.store.currentRound();return t?e==="RECOGNIZE_EN"?t.english:t.polish:""},{});backLabel=v(()=>this.store.currentRound()==="RECOGNIZE_EN"?"Polish":"English",{});backText=v(()=>{let t=this.store.currentCard(),e=this.store.currentRound();return t?e==="RECOGNIZE_EN"?t.polish:t.english:""},{});flip(){this.store.currentRound()!=="WRITE_EN"&&this.isFlipped.update(t=>!t)}resetFlip(){this.isFlipped.set(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["app-flashcard"]],decls:14,vars:6,consts:[[1,"perspective-1000","w-full","max-w-2xl","h-96","sm:h-[32rem]","cursor-pointer","group","mx-auto",3,"click"],[1,"relative","w-full","h-full","transition-all","duration-500","transform","preserve-3d"],[1,"absolute","w-full","h-full","backface-hidden","bg-white","rounded-2xl","shadow-xl","border-b-4","border-blue-200","flex","flex-col","items-center","justify-center","p-6","text-center"],[1,"text-gray-400","text-sm","font-semibold","tracking-wider","uppercase","mb-2"],[1,"text-3xl","sm:text-5xl","font-bold","text-slate-800","break-words","leading-tight"],[1,"mt-8","text-blue-500","text-sm","animate-pulse"],[1,"absolute","w-full","h-full","backface-hidden","bg-blue-50","rounded-2xl","shadow-xl","border-b-4","border-blue-300","flex","flex-col","items-center","justify-center","p-6","text-center","rotate-y-180"],[1,"text-blue-400","text-sm","font-semibold","tracking-wider","uppercase","mb-2"],[1,"text-3xl","sm:text-5xl","font-bold","text-blue-900","break-words","leading-tight"]],template:function(e,i){e&1&&(f(0,"div",0),I("click",function(){return i.flip()}),f(1,"div",1)(2,"div",2)(3,"div",3),l(4),h(),f(5,"h2",4),l(6),h(),f(7,"div",5),l(8," Tap to reveal "),h()(),f(9,"div",6)(10,"div",7),l(11),h(),f(12,"h2",8),l(13),h()()()()),e&2&&(a(),A("rotate-y-180",i.isFlipped()),a(3),g(" ",i.frontLabel()," "),a(2),g(" ",i.frontText()," "),a(5),g(" ",i.backLabel()," "),a(2),g(" ",i.backText()," "))},dependencies:[F,Y],styles:[".perspective-1000[_ngcontent-%COMP%]{perspective:1000px}.preserve-3d[_ngcontent-%COMP%]{transform-style:preserve-3d}.backface-hidden[_ngcontent-%COMP%]{backface-visibility:hidden}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}[_nghost-%COMP%]{display:block;width:100%}"]})};function J(n,t){n&1&&l(0," Round 1: Recall (Eng to Pol) ")}function Q(n,t){n&1&&l(0," Round 2: Recall (Pol to Eng) ")}function X(n,t){n&1&&l(0," Round 3: Typing Challenge ")}function ee(n,t){if(n&1){let e=T();u(0,"app-flashcard",null,0),o(2,"div",11)(3,"button",12),c("click",function(){m(e);let s=M(1),R=d();return p(R.handleAnswer(!1,s))}),_(),o(4,"svg",13),u(5,"path",14)(6,"path",15),r(),k(),o(7,"span",16),l(8,"Did not know"),r(),o(9,"span",17),l(10,"No"),r()(),o(11,"button",18),c("click",function(){m(e);let s=M(1),R=d();return p(R.handleAnswer(!0,s))}),_(),o(12,"svg",13),u(13,"polyline",19),r(),k(),o(14,"span",16),l(15,"I knew it"),r(),o(16,"span",17),l(17,"Yes"),r()()(),o(18,"button",20),c("click",function(){m(e);let s=d();return p(s.skipCard())}),_(),o(19,"svg",21),u(20,"path",22)(21,"path",23),r(),l(22," Skip this card "),r()}if(n&2){let e=M(1);a(3),P(e.isFlipped()?"bg-red-100 text-red-600 hover:bg-red-200 active:scale-95":"bg-gray-100 text-gray-400"),b("disabled",!e.isFlipped()),a(8),P(e.isFlipped()?"bg-green-100 text-green-700 hover:bg-green-200 active:scale-95 border-green-200":"bg-gray-100 text-gray-400 border-gray-200"),b("disabled",!e.isFlipped())}}function te(n,t){if(n&1){let e=T();o(0,"button",30),c("click",function(){m(e);let s=d(3);return p(s.continueAfterWrongAnswer())}),l(1," Continue "),r()}}function ne(n,t){if(n&1&&(o(0,"div",28),l(1),r(),C(2,te,2,0,"button",29)),n&2){let e=d(2);b("ngClass",e.typingFeedback.correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),a(),g(" ",e.typingFeedback.msg," "),a(),w(e.isPaused()?2:-1)}}function ie(n,t){if(n&1){let e=T();o(0,"div",10)(1,"div",24),l(2,"Translate to English"),r(),o(3,"h2",25),l(4),r(),o(5,"input",26),c("keyup.enter",function(){m(e);let s=d();return p(s.checkTyping())}),r(),o(6,"button",27),c("click",function(){m(e);let s=d();return p(s.checkTyping())}),l(7," Check Answer "),r(),C(8,ne,3,3),r()}if(n&2){let e,i=d();a(4),L((e=i.store.currentCard())==null?null:e.polish),a(),b("formControl",i.inputControl),a(),b("disabled",i.isPaused()),a(2),w(i.typingFeedback?8:-1)}}var $=class n{store=x(G);gameService=x(K);router=x(j);inputControl=new H("");typingFeedback=null;isPaused=y(!1,{});constructor(){E(()=>{this.store.phase()==="MENU"&&this.store.activeDeck().length===0&&this.router.navigate(["/"])}),E(()=>{this.store.phase()==="SUMMARY"&&this.router.navigate(["/summary"])}),E(()=>{this.isPaused()?this.inputControl.disable():this.inputControl.enable()})}handleAnswer(t,e){e.resetFlip(),setTimeout(()=>{this.gameService.handleAnswer(t)},V.FLIP_DELAY)}skipCard(){this.gameService.skipCard()}backToMenu(){this.store.reset(),this.router.navigate(["/"])}checkTyping(){if(!this.inputControl.value)return;let t=this.inputControl.value.trim().toLowerCase(),e=this.store.currentCard()?.english.toLowerCase();t===e?(this.typingFeedback={correct:!0,msg:"Correct!"},setTimeout(()=>{this.gameService.handleAnswer(!0),this.inputControl.setValue(""),this.typingFeedback=null},V.FEEDBACK_DELAY)):(this.typingFeedback={correct:!1,msg:`Incorrect. It was: ${e}`},this.isPaused.set(!0))}continueAfterWrongAnswer(){this.isPaused.set(!1),this.typingFeedback=null,this.inputControl.setValue(""),this.gameService.handleAnswer(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=S({type:n,selectors:[["app-game"]],decls:15,vars:4,consts:[["cardRef",""],[1,"flex-grow","flex","flex-col","items-center","justify-center","w-full","gap-2","sm:gap-6","animate-fade-in"],[1,"w-full","flex","justify-between","items-center","mb-2"],[1,"flex","items-center","gap-2","px-3","py-2","rounded-lg","bg-slate-100","hover:bg-slate-200","text-slate-700","font-medium","text-sm","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M19 12H5"],["d","M12 19l-7-7 7-7"],[1,"inline-block","px-3","py-1","rounded-full","bg-indigo-100","text-indigo-700","text-xs","font-bold","tracking-wide","uppercase","shadow-sm"],[1,"w-full","h-1.5","bg-slate-200","rounded-full","overflow-hidden","mb-4"],[1,"h-full","bg-blue-500","transition-all","duration-300"],[1,"w-full","max-w-sm","bg-white","rounded-2xl","shadow-lg","border-b-4","border-indigo-200","p-6","flex","flex-col","items-center","text-center"],[1,"w-full","flex","gap-3"],[1,"flex-1","py-3","sm:py-4","rounded-xl","font-bold","transition-all","flex","items-center","justify-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M18 6 6 18"],["d","m6 6 18 18"],[1,"hidden","sm:inline"],[1,"sm:hidden"],[1,"flex-1","py-3","sm:py-4","rounded-xl","font-bold","transition-all","flex","items-center","justify-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm","border",3,"click","disabled"],["points","20 6 9 17 4 12"],[1,"mt-3","py-3","px-4","rounded-xl","font-medium","transition-all","flex","items-center","justify-center","gap-2","text-slate-400","hover:text-slate-600","min-h-[44px]",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M13 5H19V11"],["d","M19 5L5 19"],[1,"text-indigo-400","text-sm","font-semibold","tracking-wider","uppercase","mb-2"],[1,"text-3xl","font-bold","text-slate-800","mb-8"],["type","text","placeholder","Type English word...",1,"w-full","p-4","rounded-xl","bg-slate-50","border-2","border-slate-200","focus:border-indigo-500","focus:bg-white","outline-none","text-lg","text-center","font-semibold","text-slate-700","transition-all","mb-4","disabled:opacity-50","disabled:cursor-not-allowed",3,"keyup.enter","formControl"],[1,"w-full","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","font-bold","rounded-xl","shadow-md","active:translate-y-0.5","transition-all","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"mt-4","p-3","rounded-lg","w-full","font-medium",3,"ngClass"],[1,"w-full","py-3","mt-4","bg-red-600","hover:bg-red-700","text-white","font-bold","rounded-xl","shadow-md","active:translate-y-0.5","transition-all"],[1,"w-full","py-3","mt-4","bg-red-600","hover:bg-red-700","text-white","font-bold","rounded-xl","shadow-md","active:translate-y-0.5","transition-all",3,"click"]],template:function(e,i){if(e&1&&(o(0,"div",1)(1,"div",2)(2,"button",3),c("click",function(){return i.backToMenu()}),_(),o(3,"svg",4),u(4,"path",5)(5,"path",6),r(),l(6," Back to Menu "),r(),k(),o(7,"span",7),C(8,J,1,0)(9,Q,1,0)(10,X,1,0),r()(),o(11,"div",8),u(12,"div",9),r(),C(13,ee,23,6)(14,ie,9,4,"div",10),r()),e&2){let s;a(8),w((s=i.store.currentRound())==="RECOGNIZE_EN"?8:s==="RECOGNIZE_PL"?9:s==="WRITE_EN"?10:-1),a(4),D("width",i.store.progress(),"%"),a(),w(i.store.currentRound()!=="WRITE_EN"?13:14)}},dependencies:[F,O,U,Z,B,W,N],styles:["[_nghost-%COMP%]{display:block}"]})};export{$ as GameComponent};
