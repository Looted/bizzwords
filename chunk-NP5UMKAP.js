import{a as Z,b as B,c as W,d as K,e as U,f as $,h as S,i as q}from"./chunk-G2ZFNDAC.js";import{$ as m,Ba as Y,D as I,E as V,Ea as y,K as a,N as w,R as D,V as F,W as R,X as b,Y as o,Z as r,_ as c,aa as h,ba as G,ca as p,da as L,ea as d,fa as E,ga as P,ha as A,ia as N,ja as l,ka as O,la as u,oa as v,ra as j,sa as H,t as f,ta as k,v as g,w as x,x as _,y as C}from"./chunk-4WL5KJUM.js";var T=class n{store=f(y);isFlipped=I(!1,{});frontLabel=v(()=>this.store.currentRound()==="RECOGNIZE_EN"?"English":"Polish",{});frontText=v(()=>{let t=this.store.currentCard(),e=this.store.currentRound();return t?e==="RECOGNIZE_EN"?t.english:t.polish:""},{});backLabel=v(()=>this.store.currentRound()==="RECOGNIZE_EN"?"Polish":"English",{});backText=v(()=>{let t=this.store.currentCard(),e=this.store.currentRound();return t?e==="RECOGNIZE_EN"?t.polish:t.english:""},{});flip(){this.store.currentRound()!=="WRITE_EN"&&this.isFlipped.update(t=>!t)}resetFlip(){this.isFlipped.set(!1)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-flashcard"]],decls:14,vars:6,consts:[[1,"perspective-1000","w-full","max-w-2xl","h-96","sm:h-[32rem]","cursor-pointer","group","mx-auto",3,"click"],[1,"relative","w-full","h-full","transition-all","duration-500","transform","preserve-3d"],[1,"absolute","w-full","h-full","backface-hidden","bg-white","rounded-2xl","shadow-xl","border-b-4","border-blue-200","flex","flex-col","items-center","justify-center","p-6","text-center"],[1,"text-gray-400","text-sm","font-semibold","tracking-wider","uppercase","mb-2"],[1,"text-3xl","sm:text-5xl","font-bold","text-slate-800","break-words","leading-tight"],[1,"mt-8","text-blue-500","text-sm","animate-pulse"],[1,"absolute","w-full","h-full","backface-hidden","bg-blue-50","rounded-2xl","shadow-xl","border-b-4","border-blue-300","flex","flex-col","items-center","justify-center","p-6","text-center","rotate-y-180"],[1,"text-blue-400","text-sm","font-semibold","tracking-wider","uppercase","mb-2"],[1,"text-3xl","sm:text-5xl","font-bold","text-blue-900","break-words","leading-tight"]],template:function(e,i){e&1&&(m(0,"div",0),L("click",function(){return i.flip()}),m(1,"div",1)(2,"div",2)(3,"div",3),l(4),h(),m(5,"h2",4),l(6),h(),m(7,"div",5),l(8," Tap to reveal "),h()(),m(9,"div",6)(10,"div",7),l(11),h(),m(12,"h2",8),l(13),h()()()()),e&2&&(a(),A("rotate-y-180",i.isFlipped()),a(3),u(" ",i.frontLabel()," "),a(2),u(" ",i.frontText()," "),a(5),u(" ",i.backLabel()," "),a(2),u(" ",i.backText()," "))},dependencies:[k,U],styles:[".perspective-1000[_ngcontent-%COMP%]{perspective:1000px}.preserve-3d[_ngcontent-%COMP%]{transform-style:preserve-3d}.backface-hidden[_ngcontent-%COMP%]{backface-visibility:hidden}.rotate-y-180[_ngcontent-%COMP%]{transform:rotateY(180deg)}[_nghost-%COMP%]{display:block;width:100%}"]})};function X(n,t){n&1&&l(0," Round 1: Recall (Eng to Pol) ")}function ee(n,t){n&1&&l(0," Round 2: Recall (Pol to Eng) ")}function te(n,t){n&1&&l(0," Round 3: Typing Challenge ")}function ne(n,t){if(n&1){let e=G();c(0,"app-flashcard",null,0),o(2,"div",11)(3,"button",12),p("click",function(){g(e);let s=E(1),M=d();return x(M.handleAnswer(!1,s))}),_(),o(4,"svg",13),c(5,"path",14)(6,"path",15),r(),C(),o(7,"span",16),l(8,"Did not know"),r(),o(9,"span",17),l(10,"No"),r()(),o(11,"button",18),p("click",function(){g(e);let s=d();return x(s.skipCard())}),_(),o(12,"svg",13),c(13,"path",19)(14,"path",20),r(),l(15," Skip "),r(),C(),o(16,"button",21),p("click",function(){g(e);let s=E(1),M=d();return x(M.handleAnswer(!0,s))}),_(),o(17,"svg",13),c(18,"polyline",22),r(),C(),o(19,"span",16),l(20,"I knew it"),r(),o(21,"span",17),l(22,"Yes"),r()()()}if(n&2){let e=E(1);a(3),N(e.isFlipped()?"bg-red-100 text-red-600 hover:bg-red-200 active:scale-95":"bg-gray-100 text-gray-400"),b("disabled",!e.isFlipped()),a(13),N(e.isFlipped()?"bg-green-100 text-green-700 hover:bg-green-200 active:scale-95 border-green-200":"bg-gray-100 text-gray-400 border-gray-200"),b("disabled",!e.isFlipped())}}function ie(n,t){if(n&1&&(o(0,"div",28),l(1),r()),n&2){let e=d(2);b("ngClass",e.typingFeedback.correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),a(),u(" ",e.typingFeedback.msg," ")}}function oe(n,t){if(n&1){let e=G();o(0,"div",10)(1,"div",23),l(2,"Translate to English"),r(),o(3,"h2",24),l(4),r(),o(5,"input",25),p("keyup.enter",function(){g(e);let s=d();return x(s.checkTyping())}),r(),o(6,"button",26),p("click",function(){g(e);let s=d();return x(s.checkTyping())}),l(7," Check Answer "),r(),D(8,ie,2,2,"div",27),r()}if(n&2){let e,i=d();a(4),O((e=i.store.currentCard())==null?null:e.polish),a(),b("formControl",i.inputControl),a(3),b("ngIf",i.typingFeedback)}}var z=class n{store=f(y);gameService=f(q);router=f(Y);inputControl=new W("");typingFeedback=null;constructor(){V(()=>{this.store.phase()==="SUMMARY"&&this.router.navigate(["/summary"])})}handleAnswer(t,e){e.resetFlip(),setTimeout(()=>{this.gameService.handleAnswer(t)},S.FLIP_DELAY)}skipCard(){this.gameService.skipCard()}checkTyping(){if(!this.inputControl.value)return;let t=this.inputControl.value.trim().toLowerCase(),e=this.store.currentCard()?.english.toLowerCase();t===e?(this.typingFeedback={correct:!0,msg:"Correct!"},setTimeout(()=>{this.gameService.handleAnswer(!0),this.inputControl.setValue(""),this.typingFeedback=null},S.FEEDBACK_DELAY)):(this.typingFeedback={correct:!1,msg:`Incorrect. It was: ${e}`},setTimeout(()=>{this.gameService.handleAnswer(!1),this.inputControl.setValue(""),this.typingFeedback=null},S.ERROR_DELAY))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-game"]],decls:15,vars:4,consts:[["cardRef",""],[1,"flex-grow","flex","flex-col","items-center","justify-center","w-full","gap-2","sm:gap-6","animate-fade-in"],[1,"w-full","flex","justify-between","items-center","mb-2"],[1,"flex","items-center","gap-2","px-3","py-2","rounded-lg","bg-slate-100","hover:bg-slate-200","text-slate-700","font-medium","text-sm","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M19 12H5"],["d","M12 19l-7-7 7-7"],[1,"inline-block","px-3","py-1","rounded-full","bg-indigo-100","text-indigo-700","text-xs","font-bold","tracking-wide","uppercase","shadow-sm"],[1,"w-full","h-1.5","bg-slate-200","rounded-full","overflow-hidden","mb-4"],[1,"h-full","bg-blue-500","transition-all","duration-300"],[1,"w-full","max-w-sm","bg-white","rounded-2xl","shadow-lg","border-b-4","border-indigo-200","p-6","flex","flex-col","items-center","text-center"],[1,"w-full","grid","grid-cols-3","gap-3"],[1,"py-3","sm:py-4","rounded-xl","font-bold","transition-all","flex","items-center","justify-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M18 6 6 18"],["d","m6 6 18 18"],[1,"hidden","sm:inline"],[1,"sm:hidden"],[1,"py-3","sm:py-4","rounded-xl","font-bold","transition-all","flex","items-center","justify-center","gap-2","bg-slate-100","text-slate-500","hover:bg-slate-200","active:scale-95",3,"click"],["d","M13 5H19V11"],["d","M19 5L5 19"],[1,"py-3","sm:py-4","rounded-xl","font-bold","transition-all","flex","items-center","justify-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed","shadow-sm","border",3,"click","disabled"],["points","20 6 9 17 4 12"],[1,"text-indigo-400","text-sm","font-semibold","tracking-wider","uppercase","mb-2"],[1,"text-3xl","font-bold","text-slate-800","mb-8"],["type","text","placeholder","Type English word...",1,"w-full","p-4","rounded-xl","bg-slate-50","border-2","border-slate-200","focus:border-indigo-500","focus:bg-white","outline-none","text-lg","text-center","font-semibold","text-slate-700","transition-all","mb-4",3,"keyup.enter","formControl"],[1,"w-full","py-3","bg-indigo-600","hover:bg-indigo-700","text-white","font-bold","rounded-xl","shadow-md","active:translate-y-0.5","transition-all",3,"click"],["class","mt-4 p-3 rounded-lg w-full font-medium",3,"ngClass",4,"ngIf"],[1,"mt-4","p-3","rounded-lg","w-full","font-medium",3,"ngClass"]],template:function(e,i){if(e&1&&(o(0,"div",1)(1,"div",2)(2,"button",3),p("click",function(){return i.store.reset()}),_(),o(3,"svg",4),c(4,"path",5)(5,"path",6),r(),l(6," Back to Menu "),r(),C(),o(7,"span",7),F(8,X,1,0)(9,ee,1,0)(10,te,1,0),r()(),o(11,"div",8),c(12,"div",9),r(),F(13,ne,23,6)(14,oe,9,3,"div",10),r()),e&2){let s;a(8),R((s=i.store.currentRound())==="RECOGNIZE_EN"?8:s==="RECOGNIZE_PL"?9:s==="WRITE_EN"?10:-1),a(4),P("width",i.store.progress(),"%"),a(),R(i.store.currentRound()!=="WRITE_EN"?13:14)}},dependencies:[k,j,H,$,Z,B,K,T],styles:["[_nghost-%COMP%]{display:block}"]})};export{z as GameComponent};
